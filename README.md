# NZFMRDataProcessing
Last update:  2023-06-14 by G. Bodenschatz

## Description

The provided code is designed to process data generated from Labview devices performing NZFMR measurements. The two functions consolidate the individual sweep data files into MATLAB arrays, then allows the user to filter out extraneous noise and produce a consolidated graph of the data. The code was originally written by Michael Elko, then updated, expanded, and documented by George Bodenschatz.

---

## Getting Started

### Dependencies
* Labview (.lvm) files - a small set of example files are given in the example folder of this repo.

* MATLAB (R2021a or later) - These functions have only been tested on MATLAB R2021a. It is possible they will work on previous versions.

### Installing
1. Put the two MATLAB files ("ScanCondenser.m" and "NoiseCompare.m") in a folder with the collected data (.lvm) files.
2. Open MATLAB and open the folder (Ctrl/Cmd + O). The code is ready to be run with the data files and the two MATLAB functions open in MATLAB.

### Executing program
1. Use the MATLAB Console to run the Scan Condenser function. The call should be of the form
    ~~~ MATLAB
    >> ScanCondenser(n) 
    ~~~
    where n is the number of .lvm files you are analyzing. After this operation has been completed, there will be a new file, "Variables.mat," and the .lvm files will be deleted from the source folder. IMPORTANT: this function is destructive to the .lvm files! Create a copy of the files to preserve them for further/different analysis.

2. Use the MATLAB Console to run the Noise Compare function. The call should be of the form
    ~~~ MATLAB
    >> NoiseCompare(n,"i")) 
    ~~~
    where n is the number of files generated by the device and the flags "i" and "q" signify whether the in-phase ("i", "I") or quadrature ("q", "Q") data will be used.
3. Figure 1 will appear. This graph can be used to visually determine the range where the data is concentrated. The upper bound of the data concentration will be used in the next step.
4. When prompted, enter the upper signal limit determined in step 3 in the MATLAB Console, then press enter. Do the same for the lower signal limit. A typical value for the lower limit is 0. 
    ~~~ MATLAB
    What is the upper signal limit?
    What is the lower signal limit?
    ~~~
5. After entering the upper and lower signal limits, the Scan Condenser will remove the out-of-bounds noise from the data and plots the average data points in a new figu

* Download the README file present in the documents folder
* The file can be edited using an IDE like Visual Studio Code or even notepad

---